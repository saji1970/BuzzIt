rootProject.name = 'Buzz it'

def resolveFromPackageJson(String module, String relativePath) {
  def workingDir = rootDir.toPath().resolve("..").normalize().toFile()
  def process = ["node", "--print", "require.resolve('${module}/package.json')"].execute(null, workingDir)
  process.waitFor()
  if (process.exitValue() != 0) {
    throw new GradleException("Unable to resolve ${module}/package.json")
  }
  def packageJsonPath = process.text.trim()
  def baseDir = new File(packageJsonPath).getParentFile()
  return new File(baseDir, relativePath).getCanonicalPath()
}

def cliNativeModules = resolveFromPackageJson('@react-native-community/cli-platform-android', 'native_modules.gradle')
apply from: cliNativeModules
applyNativeModulesSettingsGradle(settings)

include ':app'

def reactGradlePluginDir = new File(resolveFromPackageJson('@react-native/gradle-plugin', 'package.json')).getParentFile()
includeBuild(reactGradlePluginDir)
